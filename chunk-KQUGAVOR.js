import{B as u,C as m,D as t,E as n,F as d,H as T,I as R,K as p,L as r,M as q,N as j,_ as G,a as I,b as k,ca as z,ea as W,ga as B,ha as Q,ka as U,la as Y,ma as s,na as H,o as D,oa as J,p as V,qa as K,ra as X,sa as Z,ta as $,ua as ee,va as te,wa as ne,x as o,xa as re,y as E,z as A,za as ie}from"./chunk-2C4HHQOY.js";function ae(i,a){i&1&&(t(0,"div",48),r(1," Company name is required "),n())}function le(i,a){i&1&&(t(0,"div",48),r(1," Contact person is required "),n())}function me(i,a){i&1&&(t(0,"div",48),r(1," Email is required "),n())}function de(i,a){i&1&&(t(0,"div",48),r(1," Please enter a valid email address "),n())}function se(i,a){i&1&&(t(0,"div",48),r(1," Phone number is required "),n())}function ue(i,a){i&1&&(t(0,"div",48),r(1," Source is required "),n())}function pe(i,a){i&1&&(t(0,"div",48),r(1," Status is required "),n())}function ce(i,a){i&1&&(t(0,"div",48),r(1," Estimated value is required "),n())}function fe(i,a){i&1&&(t(0,"div",48),r(1," Value must be 0 or greater "),n())}function ge(i,a){i&1&&(t(0,"div",48),r(1," Date is required "),n())}function ve(i,a){if(i&1&&(t(0,"span",49),D(),t(1,"svg",43),d(2,"path",50),n(),r(3),n()),i&2){let l=R();o(3),j(" ",l.isEditMode?"Update Lead":"Create Lead"," ")}}function be(i,a){i&1&&d(0,"span",51)}var oe=class i{constructor(a,l,e,c){this.fb=a;this.mockApi=l;this.router=e;this.route=c;this.leadForm=this.fb.group({companyName:["",s.required],contactPerson:["",s.required],email:["",[s.required,s.email]],phone:["",s.required],source:["Website",s.required],status:["New",s.required],estimatedValue:[0,[s.required,s.min(0)]],generationDate:[new Date().toISOString().split("T")[0],s.required],notes:[""]})}leadForm;isSubmitting=!1;isEditMode=!1;leadId=null;ngOnInit(){this.route.paramMap.subscribe(a=>{this.leadId=a.get("id"),this.leadId&&(this.isEditMode=!0,this.loadLead(this.leadId))})}loadLead(a){this.mockApi.getLeads().subscribe({next:l=>{let e=l.find(c=>c.id===a);e?this.leadForm.patchValue({companyName:e.companyName,contactPerson:e.contactPerson,email:e.email,phone:e.phone,source:e.source,status:e.status,estimatedValue:e.estimatedValue,generationDate:e.createdDate?new Date(e.createdDate).toISOString().split("T")[0]:"",notes:e.notes}):this.router.navigate(["/crm/leads"])},error:l=>{console.error("Error loading lead",l),this.router.navigate(["/crm/leads"])}})}onSubmit(){if(this.leadForm.valid){this.isSubmitting=!0;let a=this.leadForm.value;if(this.isEditMode&&this.leadId){let l=k(I({id:this.leadId},a),{createdDate:new Date(a.generationDate)});this.mockApi.updateLead(l).subscribe({next:()=>{this.isSubmitting=!1,this.router.navigate(["/crm/leads"])},error:e=>{console.error("Error updating lead",e),this.isSubmitting=!1}})}else{let l=k(I({id:"lead"+Date.now()},a),{createdDate:new Date(a.generationDate)});this.mockApi.addLead(l).subscribe({next:()=>{this.isSubmitting=!1,this.router.navigate(["/crm/leads"])},error:e=>{console.error("Error adding lead",e),this.isSubmitting=!1}})}}else this.leadForm.markAllAsTouched()}static \u0275fac=function(l){return new(l||i)(E(re),E(U),E(B),E(W))};static \u0275cmp=A({type:i,selectors:[["app-lead-form"]],decls:104,vars:32,consts:[[1,"page-container"],[1,"page-header"],[1,"header-content"],[1,"subtitle"],[1,"card","form-card"],[3,"ngSubmit","formGroup"],[1,"form-grid"],[1,"form-group"],["for","companyName",1,"form-label"],[1,"required"],["type","text","id","companyName","formControlName","companyName","placeholder","Enter company name",1,"form-input"],["class","error-message",4,"ngIf"],["for","contactPerson",1,"form-label"],["type","text","id","contactPerson","formControlName","contactPerson","placeholder","Enter contact person name",1,"form-input"],["for","email",1,"form-label"],["type","email","id","email","formControlName","email","placeholder","email@example.com",1,"form-input"],["for","phone",1,"form-label"],["type","tel","id","phone","formControlName","phone","placeholder","Enter phone number",1,"form-input"],["for","source",1,"form-label"],["id","source","formControlName","source",1,"form-input"],["value","Website"],["value","Referral"],["value","Cold Call"],["value","Exhibition"],["value","Other"],["for","status",1,"form-label"],["id","status","formControlName","status",1,"form-input"],["value","New"],["value","Contacted"],["value","Qualified"],["value","Proposal Sent"],["value","Negotiation"],["value","Won"],["value","Lost"],["for","estimatedValue",1,"form-label"],["type","number","id","estimatedValue","formControlName","estimatedValue","placeholder","0.00",1,"form-input"],["for","generationDate",1,"form-label"],["type","date","id","generationDate","formControlName","generationDate",1,"form-input"],[1,"form-group","full-width"],["for","notes",1,"form-label"],["id","notes","formControlName","notes","rows","4","placeholder","Add any additional notes here...",1,"form-input"],[1,"form-actions"],["type","button","routerLink","/crm/leads",1,"btn","btn-secondary"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke-width","2","stroke","currentColor",1,"btn-icon"],["stroke-linecap","round","stroke-linejoin","round","d","M6 18L18 6M6 6l12 12"],["type","submit",1,"btn","btn-primary",3,"disabled"],["class","flex items-center",4,"ngIf"],["class","spinner-sm",4,"ngIf"],[1,"error-message"],[1,"flex","items-center"],["stroke-linecap","round","stroke-linejoin","round","d","M6 12L3.269 3.126A59.768 59.768 0 0121.485 12 59.77 59.77 0 013.27 20.876L5.999 12zm0 0h7.5"],[1,"spinner-sm"]],template:function(l,e){if(l&1&&(t(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1"),r(4),n(),t(5,"p",3),r(6),n()()(),t(7,"div",4)(8,"form",5),T("ngSubmit",function(){return e.onSubmit()}),t(9,"div",6)(10,"div",7)(11,"label",8),r(12,"Company Name "),t(13,"span",9),r(14,"*"),n()(),d(15,"input",10),u(16,ae,2,0,"div",11),n(),t(17,"div",7)(18,"label",12),r(19,"Contact Person "),t(20,"span",9),r(21,"*"),n()(),d(22,"input",13),u(23,le,2,0,"div",11),n(),t(24,"div",7)(25,"label",14),r(26,"Email "),t(27,"span",9),r(28,"*"),n()(),d(29,"input",15),u(30,me,2,0,"div",11)(31,de,2,0,"div",11),n(),t(32,"div",7)(33,"label",16),r(34,"Phone "),t(35,"span",9),r(36,"*"),n()(),d(37,"input",17),u(38,se,2,0,"div",11),n(),t(39,"div",7)(40,"label",18),r(41,"Source "),t(42,"span",9),r(43,"*"),n()(),t(44,"select",19)(45,"option",20),r(46,"Website"),n(),t(47,"option",21),r(48,"Referral"),n(),t(49,"option",22),r(50,"Cold Call"),n(),t(51,"option",23),r(52,"Exhibition"),n(),t(53,"option",24),r(54,"Other"),n()(),u(55,ue,2,0,"div",11),n(),t(56,"div",7)(57,"label",25),r(58,"Status "),t(59,"span",9),r(60,"*"),n()(),t(61,"select",26)(62,"option",27),r(63,"New"),n(),t(64,"option",28),r(65,"Contacted"),n(),t(66,"option",29),r(67,"Qualified"),n(),t(68,"option",30),r(69,"Proposal Sent"),n(),t(70,"option",31),r(71,"Negotiation"),n(),t(72,"option",32),r(73,"Won"),n(),t(74,"option",33),r(75,"Lost"),n()(),u(76,pe,2,0,"div",11),n(),t(77,"div",7)(78,"label",34),r(79,"Estimated Value "),t(80,"span",9),r(81,"*"),n()(),d(82,"input",35),u(83,ce,2,0,"div",11)(84,fe,2,0,"div",11),n(),t(85,"div",7)(86,"label",36),r(87,"Date "),t(88,"span",9),r(89,"*"),n()(),d(90,"input",37),u(91,ge,2,0,"div",11),n(),t(92,"div",38)(93,"label",39),r(94,"Notes"),n(),d(95,"textarea",40),n()(),t(96,"div",41)(97,"button",42),D(),t(98,"svg",43),d(99,"path",44),n(),r(100," Cancel "),n(),V(),t(101,"button",45),u(102,ve,4,1,"span",46)(103,be,1,0,"span",47),n()()()()()),l&2){let c,f,y,g,P,v,b,M,_,O,h,L,C,N,S,x,w,F;o(4),q(e.isEditMode?"Edit Lead":"Add Lead"),o(2),q(e.isEditMode?"Update lead information":"Create a new lead"),o(2),m("formGroup",e.leadForm),o(7),p("error",((c=e.leadForm.get("companyName"))==null?null:c.touched)&&((c=e.leadForm.get("companyName"))==null?null:c.invalid)),o(),m("ngIf",((f=e.leadForm.get("companyName"))==null?null:f.touched)&&((f=e.leadForm.get("companyName"))==null||f.errors==null?null:f.errors.required)),o(6),p("error",((y=e.leadForm.get("contactPerson"))==null?null:y.touched)&&((y=e.leadForm.get("contactPerson"))==null?null:y.invalid)),o(),m("ngIf",((g=e.leadForm.get("contactPerson"))==null?null:g.touched)&&((g=e.leadForm.get("contactPerson"))==null||g.errors==null?null:g.errors.required)),o(6),p("error",((P=e.leadForm.get("email"))==null?null:P.touched)&&((P=e.leadForm.get("email"))==null?null:P.invalid)),o(),m("ngIf",((v=e.leadForm.get("email"))==null?null:v.touched)&&((v=e.leadForm.get("email"))==null||v.errors==null?null:v.errors.required)),o(),m("ngIf",((b=e.leadForm.get("email"))==null?null:b.touched)&&((b=e.leadForm.get("email"))==null||b.errors==null?null:b.errors.email)),o(6),p("error",((M=e.leadForm.get("phone"))==null?null:M.touched)&&((M=e.leadForm.get("phone"))==null?null:M.invalid)),o(),m("ngIf",((_=e.leadForm.get("phone"))==null?null:_.touched)&&((_=e.leadForm.get("phone"))==null||_.errors==null?null:_.errors.required)),o(6),p("error",((O=e.leadForm.get("source"))==null?null:O.touched)&&((O=e.leadForm.get("source"))==null?null:O.invalid)),o(11),m("ngIf",((h=e.leadForm.get("source"))==null?null:h.touched)&&((h=e.leadForm.get("source"))==null||h.errors==null?null:h.errors.required)),o(6),p("error",((L=e.leadForm.get("status"))==null?null:L.touched)&&((L=e.leadForm.get("status"))==null?null:L.invalid)),o(15),m("ngIf",((C=e.leadForm.get("status"))==null?null:C.touched)&&((C=e.leadForm.get("status"))==null||C.errors==null?null:C.errors.required)),o(6),p("error",((N=e.leadForm.get("estimatedValue"))==null?null:N.touched)&&((N=e.leadForm.get("estimatedValue"))==null?null:N.invalid)),o(),m("ngIf",((S=e.leadForm.get("estimatedValue"))==null?null:S.touched)&&((S=e.leadForm.get("estimatedValue"))==null||S.errors==null?null:S.errors.required)),o(),m("ngIf",((x=e.leadForm.get("estimatedValue"))==null?null:x.touched)&&((x=e.leadForm.get("estimatedValue"))==null||x.errors==null?null:x.errors.min)),o(6),p("error",((w=e.leadForm.get("generationDate"))==null?null:w.touched)&&((w=e.leadForm.get("generationDate"))==null?null:w.invalid)),o(),m("ngIf",((F=e.leadForm.get("generationDate"))==null?null:F.touched)&&((F=e.leadForm.get("generationDate"))==null||F.errors==null?null:F.errors.required)),o(10),m("disabled",e.isSubmitting),o(),m("ngIf",!e.isSubmitting),o(),m("ngIf",e.isSubmitting)}},dependencies:[z,G,ie,K,te,ne,Y,X,ee,H,J,$,Z,Q],styles:[".page-container[_ngcontent-%COMP%]{max-width:900px;margin:0 auto}.page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:2.5rem}.page-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem;color:#1e3a5f;font-weight:700;letter-spacing:-.02em;margin-bottom:.5rem;background:none;-webkit-text-fill-color:initial}.subtitle[_ngcontent-%COMP%]{color:#2f5a8a;font-size:1rem;font-weight:500}.form-card[_ngcontent-%COMP%]{padding:2.5rem;background:var(--bg-card);border-radius:var(--radius-xl);box-shadow:var(--shadow-md);border:1px solid var(--border-light)}.form-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:2rem;margin-bottom:2.5rem}.full-width[_ngcontent-%COMP%]{grid-column:1 / -1}.form-group[_ngcontent-%COMP%]{margin-bottom:0}.form-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:1rem;padding-top:2rem;border-top:1px solid rgba(0,0,0,.05)}[data-theme=dark][_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]{border-top-color:#ffffff0d}.btn-secondary[_ngcontent-%COMP%]{background:#fee2e2!important;border:1px solid #991b1b!important;color:#991b1b!important;padding:.4rem 1rem;border-radius:var(--radius-md);font-size:.875rem;font-weight:600;text-decoration:none;display:inline-flex;align-items:center;justify-content:center;transition:all .3s ease}[data-theme=dark][_ngcontent-%COMP%]   .btn-secondary[_ngcontent-%COMP%]{background:#991b1b33;border-color:#f87171;color:#f87171}.btn-secondary[_ngcontent-%COMP%]:hover{background:#fecaca;border-color:#7f1d1d;color:#7f1d1d;transform:translateY(-1px);box-shadow:0 2px 4px #991b1b1a}[data-theme=dark][_ngcontent-%COMP%]   .btn-secondary[_ngcontent-%COMP%]:hover{background:#991b1b4d;border-color:#fca5a5;color:#fca5a5}.btn-primary[_ngcontent-%COMP%]{background:var(--primary-color)!important;color:#fff!important;box-shadow:0 1px 3px #5c7cfa4d;padding:.4rem 1rem;font-size:.875rem}.btn-primary[_ngcontent-%COMP%]:hover{background:var(--primary-dark);box-shadow:0 4px 6px -1px #5c7cfa66;transform:translateY(-1px)}.error-message[_ngcontent-%COMP%]{color:#ef4444;font-size:.8rem;margin-top:.375rem;display:flex;align-items:center;gap:.25rem}.form-input.error[_ngcontent-%COMP%]{border-color:#ef4444;background:#ef44440d}.spinner-sm[_ngcontent-%COMP%]{width:16px;height:16px;border:2px solid #ffffff;border-bottom-color:transparent;border-radius:50%;display:inline-block;animation:_ngcontent-%COMP%_rotation 1s linear infinite}.flex[_ngcontent-%COMP%]{display:flex}.items-center[_ngcontent-%COMP%]{align-items:center}.btn-icon[_ngcontent-%COMP%]{width:14px;height:14px;margin-right:6px}@keyframes _ngcontent-%COMP%_rotation{to{transform:rotate(360deg)}}@media(max-width:768px){.page-container[_ngcontent-%COMP%]{padding:0 1rem}.form-card[_ngcontent-%COMP%]{padding:1.25rem}.form-grid[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:1.5rem}.form-actions[_ngcontent-%COMP%]{flex-direction:column-reverse;gap:.75rem}.btn-secondary[_ngcontent-%COMP%], .btn-primary[_ngcontent-%COMP%]{width:100%}}"]})};export{oe as LeadFormComponent};
